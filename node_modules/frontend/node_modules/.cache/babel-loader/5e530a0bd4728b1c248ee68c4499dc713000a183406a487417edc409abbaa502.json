{"ast":null,"code":"import { confirmPasswordReset, verifyPasswordResetCode, applyActionCode, checkActionCode, sendPasswordResetEmail } from 'firebase/auth';\nimport { auth } from '../config/firebase';\nimport axios from 'axios';\nconst AUTH_API_URL = process.env.REACT_APP_AUTH_API_URL || 'http://localhost:3001/api';\n\n/**\r\n * Service pour g√©rer l'authentification Firebase\r\n */\nconst firebaseAuthService = {\n  /**\r\n   * Demander un lien de r√©initialisation de mot de passe\r\n   * Utilise le BACKEND qui g√©n√®re le lien Firebase avec le bon domaine\r\n   * Le backend s'assure que l'utilisateur existe dans Firebase\r\n   */\n  async requestPasswordReset(email) {\n    try {\n      console.log('üî• [Password Reset] Demande de r√©initialisation pour:', email);\n\n      // Appeler le backend qui va:\n      // 1. Cr√©er l'utilisateur dans Firebase si n√©cessaire\n      // 2. G√©n√©rer un lien Firebase avec le bon domaine (localhost:3003)\n      // 3. Envoyer l'email avec ce lien\n      const response = await axios.post(`${AUTH_API_URL}/auth/forgot-password`, {\n        email\n      });\n      console.log('‚úÖ [Password Reset] Email envoy√© avec succ√®s!');\n      return {\n        success: true,\n        message: response.data.message || 'Un email de r√©initialisation a √©t√© envoy√©'\n      };\n    } catch (error) {\n      console.error('‚ùå [Password Reset] Erreur:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * V√©rifier si le code de r√©initialisation Firebase est valide\r\n   * @param {string} oobCode - Le code d'action Firebase (oobCode)\r\n   * @returns {Promise<string>} - L'email associ√© au code\r\n   */\n  async verifyPasswordResetCode(oobCode) {\n    try {\n      const email = await verifyPasswordResetCode(auth, oobCode);\n      console.log('‚úÖ Password reset code verified for:', email);\n      return email;\n    } catch (error) {\n      console.error('‚ùå Error verifying password reset code:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * R√©initialiser le mot de passe avec Firebase\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   * @param {string} newPassword - Le nouveau mot de passe\r\n   */\n  async confirmPasswordReset(oobCode, newPassword) {\n    try {\n      await confirmPasswordReset(auth, oobCode, newPassword);\n      console.log('‚úÖ Password reset successful via Firebase');\n      return {\n        success: true,\n        message: 'Mot de passe r√©initialis√© avec succ√®s'\n      };\n    } catch (error) {\n      console.error('‚ùå Error confirming password reset:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * R√©initialiser le mot de passe avec le backend (fallback si pas de Firebase)\r\n   * @param {string} email - Email de l'utilisateur\r\n   * @param {string} token - Token de r√©initialisation local\r\n   * @param {string} newPassword - Le nouveau mot de passe\r\n   */\n  async resetPasswordWithToken(email, token, newPassword) {\n    try {\n      const response = await axios.post(`${AUTH_API_URL}/auth/reset-password`, {\n        email,\n        token,\n        newPassword\n      });\n      return {\n        success: true,\n        message: response.data.message || 'Mot de passe r√©initialis√© avec succ√®s'\n      };\n    } catch (error) {\n      console.error('Error resetting password with token:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * V√©rifier le type d'action Firebase (reset password, verify email, etc.)\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   */\n  async checkActionCode(oobCode) {\n    try {\n      const info = await checkActionCode(auth, oobCode);\n      console.log('‚úÖ Action code info:', info);\n      return info;\n    } catch (error) {\n      console.error('‚ùå Error checking action code:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Appliquer une action Firebase (par exemple, v√©rifier l'email)\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   */\n  async applyActionCode(oobCode) {\n    try {\n      await applyActionCode(auth, oobCode);\n      console.log('‚úÖ Action code applied successfully');\n      return {\n        success: true,\n        message: 'Action appliqu√©e avec succ√®s'\n      };\n    } catch (error) {\n      console.error('‚ùå Error applying action code:', error);\n      throw error;\n    }\n  }\n};\nexport default firebaseAuthService;","map":{"version":3,"names":["confirmPasswordReset","verifyPasswordResetCode","applyActionCode","checkActionCode","sendPasswordResetEmail","auth","axios","AUTH_API_URL","process","env","REACT_APP_AUTH_API_URL","firebaseAuthService","requestPasswordReset","email","console","log","response","post","success","message","data","error","oobCode","newPassword","resetPasswordWithToken","token","info"],"sources":["C:/Users/zeine/Desktop/university-temp/frontend/front/src/services/firebaseAuthService.js"],"sourcesContent":["import { \r\n  confirmPasswordReset, \r\n  verifyPasswordResetCode,\r\n  applyActionCode,\r\n  checkActionCode,\r\n  sendPasswordResetEmail\r\n} from 'firebase/auth';\r\nimport { auth } from '../config/firebase';\r\nimport axios from 'axios';\r\n\r\nconst AUTH_API_URL = process.env.REACT_APP_AUTH_API_URL || 'http://localhost:3001/api';\r\n\r\n/**\r\n * Service pour g√©rer l'authentification Firebase\r\n */\r\nconst firebaseAuthService = {\r\n  /**\r\n   * Demander un lien de r√©initialisation de mot de passe\r\n   * Utilise le BACKEND qui g√©n√®re le lien Firebase avec le bon domaine\r\n   * Le backend s'assure que l'utilisateur existe dans Firebase\r\n   */\r\n  async requestPasswordReset(email) {\r\n    try {\r\n      console.log('üî• [Password Reset] Demande de r√©initialisation pour:', email);\r\n      \r\n      // Appeler le backend qui va:\r\n      // 1. Cr√©er l'utilisateur dans Firebase si n√©cessaire\r\n      // 2. G√©n√©rer un lien Firebase avec le bon domaine (localhost:3003)\r\n      // 3. Envoyer l'email avec ce lien\r\n      const response = await axios.post(`${AUTH_API_URL}/auth/forgot-password`, { email });\r\n      \r\n      console.log('‚úÖ [Password Reset] Email envoy√© avec succ√®s!');\r\n      \r\n      return {\r\n        success: true,\r\n        message: response.data.message || 'Un email de r√©initialisation a √©t√© envoy√©'\r\n      };\r\n    } catch (error) {\r\n      console.error('‚ùå [Password Reset] Erreur:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * V√©rifier si le code de r√©initialisation Firebase est valide\r\n   * @param {string} oobCode - Le code d'action Firebase (oobCode)\r\n   * @returns {Promise<string>} - L'email associ√© au code\r\n   */\r\n  async verifyPasswordResetCode(oobCode) {\r\n    try {\r\n      const email = await verifyPasswordResetCode(auth, oobCode);\r\n      console.log('‚úÖ Password reset code verified for:', email);\r\n      return email;\r\n    } catch (error) {\r\n      console.error('‚ùå Error verifying password reset code:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©initialiser le mot de passe avec Firebase\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   * @param {string} newPassword - Le nouveau mot de passe\r\n   */\r\n  async confirmPasswordReset(oobCode, newPassword) {\r\n    try {\r\n      await confirmPasswordReset(auth, oobCode, newPassword);\r\n      console.log('‚úÖ Password reset successful via Firebase');\r\n      return {\r\n        success: true,\r\n        message: 'Mot de passe r√©initialis√© avec succ√®s'\r\n      };\r\n    } catch (error) {\r\n      console.error('‚ùå Error confirming password reset:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * R√©initialiser le mot de passe avec le backend (fallback si pas de Firebase)\r\n   * @param {string} email - Email de l'utilisateur\r\n   * @param {string} token - Token de r√©initialisation local\r\n   * @param {string} newPassword - Le nouveau mot de passe\r\n   */\r\n  async resetPasswordWithToken(email, token, newPassword) {\r\n    try {\r\n      const response = await axios.post(`${AUTH_API_URL}/auth/reset-password`, {\r\n        email,\r\n        token,\r\n        newPassword\r\n      });\r\n      return {\r\n        success: true,\r\n        message: response.data.message || 'Mot de passe r√©initialis√© avec succ√®s'\r\n      };\r\n    } catch (error) {\r\n      console.error('Error resetting password with token:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * V√©rifier le type d'action Firebase (reset password, verify email, etc.)\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   */\r\n  async checkActionCode(oobCode) {\r\n    try {\r\n      const info = await checkActionCode(auth, oobCode);\r\n      console.log('‚úÖ Action code info:', info);\r\n      return info;\r\n    } catch (error) {\r\n      console.error('‚ùå Error checking action code:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Appliquer une action Firebase (par exemple, v√©rifier l'email)\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   */\r\n  async applyActionCode(oobCode) {\r\n    try {\r\n      await applyActionCode(auth, oobCode);\r\n      console.log('‚úÖ Action code applied successfully');\r\n      return {\r\n        success: true,\r\n        message: 'Action appliqu√©e avec succ√®s'\r\n      };\r\n    } catch (error) {\r\n      console.error('‚ùå Error applying action code:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\nexport default firebaseAuthService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}