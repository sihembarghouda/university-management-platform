{"ast":null,"code":"import { confirmPasswordReset, verifyPasswordResetCode, applyActionCode, checkActionCode } from 'firebase/auth';\nimport { auth } from '../config/firebase';\nimport axios from 'axios';\nconst AUTH_API_URL = process.env.REACT_APP_AUTH_API_URL || 'http://localhost:3001/api';\n\n/**\r\n * Service pour gérer l'authentification Firebase\r\n */\nconst firebaseAuthService = {\n  /**\r\n   * Demander un lien de réinitialisation de mot de passe\r\n   * Cette fonction appelle le backend qui génère le lien Firebase\r\n   */\n  async requestPasswordReset(email) {\n    try {\n      const response = await axios.post(`${AUTH_API_URL}/auth/forgot-password`, {\n        email\n      });\n      return {\n        success: true,\n        message: response.data.message || 'Email de réinitialisation envoyé'\n      };\n    } catch (error) {\n      console.error('Error requesting password reset:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Vérifier si le code de réinitialisation Firebase est valide\r\n   * @param {string} oobCode - Le code d'action Firebase (oobCode)\r\n   * @returns {Promise<string>} - L'email associé au code\r\n   */\n  async verifyPasswordResetCode(oobCode) {\n    try {\n      const email = await verifyPasswordResetCode(auth, oobCode);\n      console.log('✅ Password reset code verified for:', email);\n      return email;\n    } catch (error) {\n      console.error('❌ Error verifying password reset code:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Réinitialiser le mot de passe avec Firebase\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   * @param {string} newPassword - Le nouveau mot de passe\r\n   */\n  async confirmPasswordReset(oobCode, newPassword) {\n    try {\n      await confirmPasswordReset(auth, oobCode, newPassword);\n      console.log('✅ Password reset successful via Firebase');\n      return {\n        success: true,\n        message: 'Mot de passe réinitialisé avec succès'\n      };\n    } catch (error) {\n      console.error('❌ Error confirming password reset:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Réinitialiser le mot de passe avec le backend (fallback si pas de Firebase)\r\n   * @param {string} email - Email de l'utilisateur\r\n   * @param {string} token - Token de réinitialisation local\r\n   * @param {string} newPassword - Le nouveau mot de passe\r\n   */\n  async resetPasswordWithToken(email, token, newPassword) {\n    try {\n      const response = await axios.post(`${AUTH_API_URL}/auth/reset-password`, {\n        email,\n        token,\n        newPassword\n      });\n      return {\n        success: true,\n        message: response.data.message || 'Mot de passe réinitialisé avec succès'\n      };\n    } catch (error) {\n      console.error('Error resetting password with token:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Vérifier le type d'action Firebase (reset password, verify email, etc.)\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   */\n  async checkActionCode(oobCode) {\n    try {\n      const info = await checkActionCode(auth, oobCode);\n      console.log('✅ Action code info:', info);\n      return info;\n    } catch (error) {\n      console.error('❌ Error checking action code:', error);\n      throw error;\n    }\n  },\n  /**\r\n   * Appliquer une action Firebase (par exemple, vérifier l'email)\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   */\n  async applyActionCode(oobCode) {\n    try {\n      await applyActionCode(auth, oobCode);\n      console.log('✅ Action code applied successfully');\n      return {\n        success: true,\n        message: 'Action appliquée avec succès'\n      };\n    } catch (error) {\n      console.error('❌ Error applying action code:', error);\n      throw error;\n    }\n  }\n};\nexport default firebaseAuthService;","map":{"version":3,"names":["confirmPasswordReset","verifyPasswordResetCode","applyActionCode","checkActionCode","auth","axios","AUTH_API_URL","process","env","REACT_APP_AUTH_API_URL","firebaseAuthService","requestPasswordReset","email","response","post","success","message","data","error","console","oobCode","log","newPassword","resetPasswordWithToken","token","info"],"sources":["C:/Users/zeine/Desktop/university-temp/frontend/front/src/services/firebaseAuthService.js"],"sourcesContent":["import { \r\n  confirmPasswordReset, \r\n  verifyPasswordResetCode,\r\n  applyActionCode,\r\n  checkActionCode\r\n} from 'firebase/auth';\r\nimport { auth } from '../config/firebase';\r\nimport axios from 'axios';\r\n\r\nconst AUTH_API_URL = process.env.REACT_APP_AUTH_API_URL || 'http://localhost:3001/api';\r\n\r\n/**\r\n * Service pour gérer l'authentification Firebase\r\n */\r\nconst firebaseAuthService = {\r\n  /**\r\n   * Demander un lien de réinitialisation de mot de passe\r\n   * Cette fonction appelle le backend qui génère le lien Firebase\r\n   */\r\n  async requestPasswordReset(email) {\r\n    try {\r\n      const response = await axios.post(`${AUTH_API_URL}/auth/forgot-password`, { email });\r\n      return {\r\n        success: true,\r\n        message: response.data.message || 'Email de réinitialisation envoyé'\r\n      };\r\n    } catch (error) {\r\n      console.error('Error requesting password reset:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Vérifier si le code de réinitialisation Firebase est valide\r\n   * @param {string} oobCode - Le code d'action Firebase (oobCode)\r\n   * @returns {Promise<string>} - L'email associé au code\r\n   */\r\n  async verifyPasswordResetCode(oobCode) {\r\n    try {\r\n      const email = await verifyPasswordResetCode(auth, oobCode);\r\n      console.log('✅ Password reset code verified for:', email);\r\n      return email;\r\n    } catch (error) {\r\n      console.error('❌ Error verifying password reset code:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Réinitialiser le mot de passe avec Firebase\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   * @param {string} newPassword - Le nouveau mot de passe\r\n   */\r\n  async confirmPasswordReset(oobCode, newPassword) {\r\n    try {\r\n      await confirmPasswordReset(auth, oobCode, newPassword);\r\n      console.log('✅ Password reset successful via Firebase');\r\n      return {\r\n        success: true,\r\n        message: 'Mot de passe réinitialisé avec succès'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error confirming password reset:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Réinitialiser le mot de passe avec le backend (fallback si pas de Firebase)\r\n   * @param {string} email - Email de l'utilisateur\r\n   * @param {string} token - Token de réinitialisation local\r\n   * @param {string} newPassword - Le nouveau mot de passe\r\n   */\r\n  async resetPasswordWithToken(email, token, newPassword) {\r\n    try {\r\n      const response = await axios.post(`${AUTH_API_URL}/auth/reset-password`, {\r\n        email,\r\n        token,\r\n        newPassword\r\n      });\r\n      return {\r\n        success: true,\r\n        message: response.data.message || 'Mot de passe réinitialisé avec succès'\r\n      };\r\n    } catch (error) {\r\n      console.error('Error resetting password with token:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Vérifier le type d'action Firebase (reset password, verify email, etc.)\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   */\r\n  async checkActionCode(oobCode) {\r\n    try {\r\n      const info = await checkActionCode(auth, oobCode);\r\n      console.log('✅ Action code info:', info);\r\n      return info;\r\n    } catch (error) {\r\n      console.error('❌ Error checking action code:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Appliquer une action Firebase (par exemple, vérifier l'email)\r\n   * @param {string} oobCode - Le code d'action Firebase\r\n   */\r\n  async applyActionCode(oobCode) {\r\n    try {\r\n      await applyActionCode(auth, oobCode);\r\n      console.log('✅ Action code applied successfully');\r\n      return {\r\n        success: true,\r\n        message: 'Action appliquée avec succès'\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Error applying action code:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\nexport default firebaseAuthService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}